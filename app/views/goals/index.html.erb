<div class="max-w-2xl mx-auto px-4 py-10 md:py-16">
  <div class="flex items-center justify-between mb-8">
    <h1 class="text-2xl font-black text-stone-800 flex items-center gap-2">
      <span class="text-3xl">🏆</span> 過去の達成目標
    </h1>
    <%= link_to "プロフィールへ戻る", profile_path, class: "text-xs font-bold text-stone-400 hover:text-stone-600 transition" %>
  </div>

  <div class="space-y-6">
    <% if @goals.any? %>
      <% @goals.each do |goal| %>
        <% actual_savings = @user.savings_for_month(goal.target_month) %>
        <% actual_count = @user.count_for_month(goal.target_month) %>
        <% is_achieved = goal.achieved_at.present? %>

        <div class="bg-white rounded-[2rem] p-6 border transition-all duration-300 <%= is_achieved ? 'border-emerald-100 shadow-xl shadow-emerald-50' : 'border-stone-100' %>">
          <div class="flex justify-between items-start mb-4">
            <div>
              <span class="text-[10px] font-black text-stone-300 uppercase tracking-widest leading-none">
                <%= goal.target_month.strftime("%Y / %m") %>
              </span>
              <h2 class="text-lg font-black text-stone-700">自炊チャレンジ</h2>
            </div>
            
            <div class="text-right">
              <% if is_achieved %>
                <span class="bg-emerald-500 text-white text-[10px] font-black px-3 py-1 rounded-full shadow-md shadow-emerald-200">目標達成!</span>
                <p class="text-[9px] text-emerald-400 font-bold mt-1.5">
                  <%= goal.achieved_at.strftime("%-m/%d 達成") %>
                </p>
              <% else %>
                <span class="bg-stone-100 text-stone-400 text-[10px] font-black px-3 py-1 rounded-full">自炊記録</span>
              <% end %>
            </div>
          </div>

          <div class="grid grid-cols-2 gap-4">
            <div class="bg-stone-50 rounded-2xl p-4">
              <p class="text-[9px] font-bold text-stone-400 uppercase mb-1">節約金額</p>
              <p class="text-sm font-black <%= actual_savings >= goal.target_amount ? 'text-emerald-600' : 'text-stone-600' %>">
                ¥<%= number_with_delimiter(actual_savings) %>
                <span class="text-[10px] text-stone-300 ml-1">/ ¥<%= number_with_delimiter(goal.target_amount) %></span>
              </p>
            </div>
            
            <div class="bg-stone-50 rounded-2xl p-4">
              <p class="text-[9px] font-bold text-stone-400 uppercase mb-1">自炊回数</p>
              <p class="text-sm font-black <%= actual_count >= goal.target_times ? 'text-emerald-600' : 'text-stone-600' %>">
                <%= actual_count %>回
                <span class="text-[10px] text-stone-300 ml-1">/ <%= goal.target_times %>回</span>
              </p>
            </div>
          </div>
        </div>
      <% end %>
    <% else %>
      <div class="text-center py-20 bg-stone-50 rounded-[3rem] border-2 border-dashed border-stone-200">
        <p class="text-stone-400 font-bold">まだ完了した目標がありません</p>
      </div>
    <% end %>
  </div>
</div>